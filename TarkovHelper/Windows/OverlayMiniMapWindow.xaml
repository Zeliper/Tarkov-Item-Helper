<Window x:Class="TarkovHelper.Windows.OverlayMiniMapWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        mc:Ignorable="d"
        Title="Tarkov Helper - MiniMap"
        Width="300" Height="300"
        MinWidth="100" MinHeight="100"
        MaxWidth="800" MaxHeight="800"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="CanResizeWithGrip"
        Background="Transparent"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        PreviewMouseDown="Window_PreviewMouseDown"
        PreviewMouseUp="Window_PreviewMouseUp"
        PreviewMouseMove="Window_PreviewMouseMove">

    <!-- 메인 컨테이너 - 프레임 없이 맵만 표시 -->
    <Border x:Name="MainBorder"
            Background="#88000000"
            BorderThickness="0"
            CornerRadius="0"
            ClipToBounds="True">
        <Grid x:Name="MapContainer" Background="Transparent">
            <!-- 맵 캔버스 -->
            <Canvas x:Name="MapCanvas"
                    Background="Transparent"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    ClipToBounds="False">
                <Canvas.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform x:Name="MapScale" ScaleX="1" ScaleY="1"/>
                        <TranslateTransform x:Name="MapTranslate" X="0" Y="0"/>
                    </TransformGroup>
                </Canvas.RenderTransform>

                <!-- SVG 맵 이미지 -->
                <svgc:SvgViewbox x:Name="MapSvg" Stretch="None"/>

                <!-- 탈출구 마커 컨테이너 -->
                <Canvas x:Name="ExtractMarkersContainer" ClipToBounds="False"/>

                <!-- 퀘스트 마커 컨테이너 -->
                <Canvas x:Name="QuestMarkersContainer" ClipToBounds="False"/>

                <!-- 플레이어 마커 -->
                <Canvas x:Name="PlayerMarkerContainer" Visibility="Collapsed">
                    <!-- 외곽 원 (테두리) -->
                    <Ellipse x:Name="PlayerOuterCircle"
                             Width="20" Height="20"
                             Fill="#442196F3"
                             Stroke="#2196F3"
                             StrokeThickness="2"/>

                    <!-- 내부 원 -->
                    <Ellipse x:Name="PlayerInnerCircle"
                             Width="10" Height="10"
                             Fill="#2196F3"
                             Canvas.Left="5" Canvas.Top="5"/>

                    <!-- 방향 화살표 -->
                    <Polygon x:Name="PlayerDirectionArrow"
                             Points="0,0 5,-12 10,0"
                             Fill="#882196F3"
                             Canvas.Left="5" Canvas.Top="-8">
                        <Polygon.RenderTransform>
                            <RotateTransform x:Name="PlayerRotation" Angle="0" CenterX="5" CenterY="6"/>
                        </Polygon.RenderTransform>
                    </Polygon>
                </Canvas>
            </Canvas>

            <!-- 맵 없음 메시지 -->
            <TextBlock x:Name="TxtNoMap"
                       Text="No map selected"
                       Foreground="#666666"
                       FontSize="14"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Visibility="Visible"/>

            <!-- 리사이즈 그립 (우측 하단) -->
            <Path Data="M 0,12 L 12,0 M 4,12 L 12,4 M 8,12 L 12,8"
                  Stroke="#44FFFFFF"
                  StrokeThickness="1"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Bottom"
                  Margin="0,0,2,2"
                  IsHitTestVisible="False"/>
        </Grid>
    </Border>
</Window>
