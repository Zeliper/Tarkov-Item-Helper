# PRD: í†µí•© ì•„ì´í…œ í—ˆë¸Œ (Integrated Item Hub)

## ê°œìš”

### ëª©ì 
ì•„ì´í…œ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ë©´ í€˜ìŠ¤íŠ¸ì™€ ì€ì‹ ì²˜ì—ì„œ í•„ìš”í•œ ì „ì²´ ìˆ˜ìš”ë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆëŠ” í†µí•© ë·° ì œê³µ

### í˜„ì¬ ë¬¸ì œì 
- Items íƒ­: í€˜ìŠ¤íŠ¸ í•„ìš” ì•„ì´í…œë§Œ í‘œì‹œ
- Hideout íƒ­: ì€ì‹ ì²˜ í•„ìš” ì¬ë£Œë§Œ í‘œì‹œ
- ì‚¬ìš©ìê°€ ì•„ì´í…œ ì´ ìˆ˜ìš”ë¥¼ íŒŒì•…í•˜ë ¤ë©´ ë‘ íƒ­ì„ ì˜¤ê°€ì•¼ í•¨
- ìš°ì„ ìˆœìœ„ íŒë‹¨ì´ ì–´ë ¤ì›€ (í€˜ìŠ¤íŠ¸ vs ì€ì‹ ì²˜)

### ëª©í‘œ
1. ì•„ì´í…œë³„ ì „ì²´ ìˆ˜ìš” í†µí•© í‘œì‹œ
2. í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ ì¶œì²˜ êµ¬ë¶„
3. ë³´ìœ ëŸ‰ ëŒ€ë¹„ ë¶€ì¡±ëŸ‰ ëª…í™•íˆ í‘œì‹œ
4. í´ë¦­ ì‹œ í•´ë‹¹ í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ë¡œ ì¦‰ì‹œ ì´ë™

---

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### FR-1: í†µí•© ì•„ì´í…œ ì¹´ë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ Salewa First Aid Kit                      [ğŸ‘]  â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                     â”‚
â”‚ ğŸ“Š ìˆ˜ëŸ‰ í˜„í™©                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë³´ìœ : 3 (FIR: 2, ì¼ë°˜: 1)                       â”‚ â”‚
â”‚ â”‚ í•„ìš”: 6 (í€˜ìŠ¤íŠ¸: 3, ì€ì‹ ì²˜: 3)                  â”‚ â”‚
â”‚ â”‚ ë¶€ì¡±: 3                                         â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 50%                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ ğŸ“‹ í€˜ìŠ¤íŠ¸ í•„ìš” (3ê°œ)                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â—‹ Therapist - Shortage                          â”‚ â”‚
â”‚ â”‚   2ê°œ í•„ìš” (FIR) | ë³´ìœ : 2/2 âœ“           [ì´ë™] â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ â—‹ Therapist - Car Repair                        â”‚ â”‚
â”‚ â”‚   1ê°œ í•„ìš” | ë³´ìœ : 1/1 âœ“                 [ì´ë™] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ ğŸ  ì€ì‹ ì²˜ í•„ìš” (3ê°œ)                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â—‹ Medstation Lv2                                â”‚ â”‚
â”‚ â”‚   3ê°œ í•„ìš” | ë³´ìœ : 0/3 âœ—                 [ì´ë™] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ ğŸ’¡ íšë“ íŒ                                          â”‚
â”‚ â€¢ Crack House (Customs), EMERCOM (Interchange)     â”‚
â”‚ â€¢ Therapist Lv2 êµ¬ë§¤ ê°€ëŠ¥                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### FR-2: í•„í„° ë° ì •ë ¬

| í•„í„° | ì„¤ëª… |
|------|------|
| ì „ì²´ | ëª¨ë“  ì•„ì´í…œ |
| ë¶€ì¡± ì•„ì´í…œë§Œ | ë³´ìœ ëŸ‰ < í•„ìš”ëŸ‰ |
| í€˜ìŠ¤íŠ¸ ì „ìš© | í€˜ìŠ¤íŠ¸ì—ë§Œ í•„ìš”í•œ ì•„ì´í…œ |
| ì€ì‹ ì²˜ ì „ìš© | ì€ì‹ ì²˜ì—ë§Œ í•„ìš”í•œ ì•„ì´í…œ |
| ë‘˜ ë‹¤ í•„ìš” | í€˜ìŠ¤íŠ¸ + ì€ì‹ ì²˜ ëª¨ë‘ í•„ìš” |

| ì •ë ¬ | ì„¤ëª… |
|------|------|
| ë¶€ì¡±ëŸ‰ ìˆœ | ê°€ì¥ ë¶€ì¡±í•œ ì•„ì´í…œ ë¨¼ì € |
| ì´ë¦„ìˆœ | ì•ŒíŒŒë²³/ê°€ë‚˜ë‹¤ ìˆœ |
| ì´ í•„ìš”ëŸ‰ ìˆœ | ê°€ì¥ ë§ì´ í•„ìš”í•œ ì•„ì´í…œ ë¨¼ì € |
| ì§„í–‰ë¥  ìˆœ | ê±°ì˜ ì™„ë£Œëœ ì•„ì´í…œ ë¨¼ì € |

### FR-3: ë„¤ë¹„ê²Œì´ì…˜

- **[ì´ë™] ë²„íŠ¼ í´ë¦­**: í•´ë‹¹ í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ íƒ­ìœ¼ë¡œ ì „í™˜ + í•­ëª© ì„ íƒ
- **ì•„ì´í…œ ì•„ì´ì½˜ í´ë¦­**: Wiki ë§í¬ ì—´ê¸°
- **ë”ë¸”í´ë¦­**: ì¸ë²¤í† ë¦¬ ìˆ˜ëŸ‰ í¸ì§‘ ëª¨ë“œ

### FR-4: ì‹¤ì‹œê°„ ë™ê¸°í™”

- ì¸ë²¤í† ë¦¬ ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜
- í€˜ìŠ¤íŠ¸ ì™„ë£Œ ì‹œ í•´ë‹¹ í•­ëª© ì œê±°
- ì€ì‹ ì²˜ ë ˆë²¨ì—… ì‹œ í•´ë‹¹ í•­ëª© ì œê±°

---

## ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

### TR-1: ë°ì´í„° ëª¨ë¸

```csharp
public class IntegratedItemRequirement
{
    public string ItemId { get; set; }
    public string ItemName { get; set; }
    public string ItemNameKo { get; set; }
    public string IconLink { get; set; }

    // ë³´ìœ  í˜„í™©
    public int OwnedFir { get; set; }
    public int OwnedNonFir { get; set; }
    public int TotalOwned => OwnedFir + OwnedNonFir;

    // í•„ìš” í˜„í™©
    public int QuestRequired { get; set; }
    public int QuestRequiredFir { get; set; }
    public int HideoutRequired { get; set; }
    public int TotalRequired => QuestRequired + HideoutRequired;

    // ê³„ì‚°
    public int Shortage => Math.Max(0, TotalRequired - TotalOwned);
    public double Progress => TotalRequired > 0 ? (double)TotalOwned / TotalRequired : 1.0;

    // ìƒì„¸ ì¶œì²˜
    public List<QuestItemSource> QuestSources { get; set; }
    public List<HideoutItemSource> HideoutSources { get; set; }
}

public class QuestItemSource
{
    public string QuestId { get; set; }
    public string QuestName { get; set; }
    public string TraderName { get; set; }
    public int RequiredCount { get; set; }
    public bool RequiresFir { get; set; }
    public bool IsFulfilled { get; set; }
}

public class HideoutItemSource
{
    public string StationId { get; set; }
    public string StationName { get; set; }
    public int Level { get; set; }
    public int RequiredCount { get; set; }
    public bool IsFulfilled { get; set; }
}
```

### TR-2: ì„œë¹„ìŠ¤ ë ˆì´ì–´

```csharp
public class IntegratedItemService
{
    // ì˜ì¡´ì„±
    private readonly ItemDbService _itemDb;
    private readonly QuestDbService _questDb;
    private readonly HideoutDbService _hideoutDb;
    private readonly ItemInventoryService _inventory;
    private readonly QuestProgressService _questProgress;
    private readonly HideoutProgressService _hideoutProgress;

    // ë©”ì„œë“œ
    public List<IntegratedItemRequirement> GetAllRequirements();
    public IntegratedItemRequirement GetItemRequirement(string itemId);
    public List<IntegratedItemRequirement> GetShortageItems();
    public List<IntegratedItemRequirement> GetItemsForQuest(string questId);
    public List<IntegratedItemRequirement> GetItemsForHideout(string stationId, int level);
}
```

### TR-3: UI êµ¬í˜„

- **ìœ„ì¹˜**: ê¸°ì¡´ Items íƒ­ í™•ì¥ ë˜ëŠ” ìƒˆë¡œìš´ "í†µí•©" ì„œë¸Œíƒ­
- **XAML êµ¬ì¡°**:
  - ListView + DataTemplate (IntegratedItemCard)
  - Expanderë¡œ í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ ì„¹ì…˜ ì ‘ê¸°
  - ProgressBarë¡œ ì§„í–‰ë¥  ì‹œê°í™”

### TR-4: ì´ë²¤íŠ¸ ì—°ë™

```csharp
// êµ¬ë…í•  ì´ë²¤íŠ¸
ItemInventoryService.InventoryChanged += RefreshItems;
QuestProgressService.ProgressChanged += RefreshItems;
HideoutProgressService.ProgressChanged += RefreshItems;
```

---

## UI/UX ìš”êµ¬ì‚¬í•­

### UX-1: ìƒ‰ìƒ ì½”ë“œ

| ìƒíƒœ | ìƒ‰ìƒ | ì„¤ëª… |
|------|------|------|
| ì¶©ì¡± | #4CAF50 (ë…¹ìƒ‰) | ë³´ìœ ëŸ‰ >= í•„ìš”ëŸ‰ |
| ë¶€ë¶„ ì¶©ì¡± | #FFC107 (ë…¸ë‘) | 0 < ë³´ìœ ëŸ‰ < í•„ìš”ëŸ‰ |
| ë¯¸ì¶©ì¡± | #F44336 (ë¹¨ê°•) | ë³´ìœ ëŸ‰ = 0 |
| FIR í•„ìš” | #2196F3 (íŒŒë‘) | FIR íƒœê·¸ ê°•ì¡° |

### UX-2: ì•„ì´ì½˜

| ìš©ë„ | ì•„ì´ì½˜ |
|------|--------|
| í€˜ìŠ¤íŠ¸ | ğŸ“‹ |
| ì€ì‹ ì²˜ | ğŸ  |
| FIR | âœ“ (ì²´í¬ in ì›) |
| ë¶€ì¡± | âš ï¸ |
| ì¶©ì¡± | âœ“ |

### UX-3: ë°˜ì‘í˜• ë™ì‘

- ëª©ë¡ ìŠ¤í¬ë¡¤ ì‹œ ë¶€ë“œëŸ¬ìš´ ê°€ìƒí™”
- í•„í„° ë³€ê²½ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì „í™˜
- ë¡œë”© ì¤‘ ìŠ¤ì¼ˆë ˆí†¤ UI

---

## êµ¬í˜„ ê³„íš

### Phase 1: ë°ì´í„° ë ˆì´ì–´ (1-2ì¼)
1. `IntegratedItemRequirement` ëª¨ë¸ ìƒì„±
2. `IntegratedItemService` êµ¬í˜„
3. ê¸°ì¡´ ì„œë¹„ìŠ¤ ì—°ë™

### Phase 2: UI êµ¬í˜„ (2-3ì¼)
1. IntegratedItemCard DataTemplate
2. í•„í„°/ì •ë ¬ ì»¨íŠ¸ë¡¤
3. ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§

### Phase 3: í†µí•© ë° í…ŒìŠ¤íŠ¸ (1ì¼)
1. ê¸°ì¡´ Items íƒ­ê³¼ í†µí•©
2. ì´ë²¤íŠ¸ ë™ê¸°í™” í…ŒìŠ¤íŠ¸
3. ì„±ëŠ¥ ìµœì í™”

---

## ì„±ê³µ ì§€í‘œ

- ì‚¬ìš©ìê°€ ì•„ì´í…œ ìˆ˜ìš”ë¥¼ íŒŒì•…í•˜ëŠ” ì‹œê°„ 50% ë‹¨ì¶•
- íƒ­ ì „í™˜ íšŸìˆ˜ ê°ì†Œ
- ì•„ì´í…œ ìš°ì„ ìˆœìœ„ ê²°ì • ìš©ì´ì„± í–¥ìƒ
