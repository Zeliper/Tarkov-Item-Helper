<Window x:Class="TarkovDBEditor.Views.SelectObjectiveDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Objective" Height="400" Width="500"
        Background="{StaticResource PrimaryBrush}"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Select an objective to apply the location:"
                   Foreground="{StaticResource TextBrush}" FontSize="14" Margin="0,0,0,8"/>

        <!-- Marker Info -->
        <Border Grid.Row="1" Background="{StaticResource SecondaryBrush}"
                CornerRadius="4" Padding="10" Margin="0,0,0,12">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Applying marker:" Foreground="{StaticResource TextDimBrush}" Margin="0,0,8,0"/>
                <TextBlock x:Name="MarkerNameText" FontWeight="SemiBold" Foreground="{StaticResource AccentBrush}"/>
            </StackPanel>
        </Border>

        <!-- Objectives List -->
        <ListBox Grid.Row="2" x:Name="ObjectivesList"
                 BorderThickness="0"
                 Background="Transparent"
                 SelectionMode="Single">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="{StaticResource SecondaryBrush}" CornerRadius="4"
                            Margin="0,2" Padding="10,8">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                <!-- Type Badge -->
                                <Border CornerRadius="3" Padding="6,1" Margin="0,0,8,0">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Background" Value="#607D8B"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ObjectiveType}" Value="Kill">
                                                    <Setter Property="Background" Value="#C62828"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ObjectiveType}" Value="Collect">
                                                    <Setter Property="Background" Value="#1976D2"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ObjectiveType}" Value="Visit">
                                                    <Setter Property="Background" Value="#388E3C"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ObjectiveType}" Value="Mark">
                                                    <Setter Property="Background" Value="#F57C00"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding ObjectiveType}" Value="Stash">
                                                    <Setter Property="Background" Value="#00796B"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <TextBlock Text="{Binding TypeDisplay}" Foreground="White" FontSize="10"/>
                                </Border>

                                <!-- Map Badge -->
                                <Border Background="#0277BD" CornerRadius="3" Padding="6,1"
                                        Visibility="{Binding HasLocation, Converter={StaticResource BoolToVisibility}}">
                                    <TextBlock Text="{Binding EffectiveMapName}" Foreground="White" FontSize="10"/>
                                </Border>
                            </StackPanel>

                            <!-- Description -->
                            <TextBlock Text="{Binding Description}" TextWrapping="Wrap" FontSize="12"/>

                            <!-- Current Location Info -->
                            <TextBlock Text="{Binding CoordinatesDisplay}" FontSize="10"
                                       Foreground="#4CAF50" FontFamily="Consolas"
                                       Visibility="{Binding HasCoordinates, Converter={StaticResource BoolToVisibility}}"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Apply" Width="80" Margin="0,0,8,0"
                    Style="{StaticResource PrimaryButton}"
                    Click="Apply_Click"/>
            <Button Content="Cancel" Width="80"
                    Style="{StaticResource SecondaryButton}"
                    Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
