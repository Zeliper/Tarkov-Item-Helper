<Window x:Class="TarkovDBEditor.Views.TestMapWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        Title="Test Map - Lighthouse" Height="800" Width="1200"
        Background="#0F0F0F"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Control Panel -->
        <Border Grid.Row="0" Background="#1A1A1A" Padding="10">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="Screenshot Filename:" Foreground="#9A8866" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBox x:Name="ScreenshotInput" Width="600" Height="24"
                             Background="#000" Foreground="#999" BorderBrush="#9A8866"
                             VerticalContentAlignment="Center" Padding="5,0"
                             Text="2025-12-10[15-27]_-96.14, 18.95, -36.50_0.11351, 0.06271, -0.00543, 0.99154_0.17 (0)"/>
                    <Button x:Name="ApplyButton" Content="Apply" Margin="10,0,0,0" Padding="15,5"
                            Background="#70A800" Foreground="White" BorderThickness="0"
                            Click="ApplyButton_Click"/>
                    <Button x:Name="ParseClipboardButton" Content="From Clipboard" Margin="10,0,0,0" Padding="15,5"
                            Background="#333" Foreground="#9A8866" BorderBrush="#9A8866" BorderThickness="1"
                            Click="ParseClipboardButton_Click"/>
                </StackPanel>

                <!-- Parsed Values Display -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Position:" Foreground="#666" Margin="0,0,5,0"/>
                    <TextBlock x:Name="PositionText" Text="X: 0, Y: 0, Z: 0" Foreground="#9A8866" Margin="0,0,20,0"/>
                    <TextBlock Text="Quaternion:" Foreground="#666" Margin="0,0,5,0"/>
                    <TextBlock x:Name="QuaternionText" Text="qx: 0, qy: 0, qz: 0, qw: 1" Foreground="#9A8866" Margin="0,0,20,0"/>
                    <TextBlock Text="Yaw:" Foreground="#666" Margin="0,0,5,0"/>
                    <TextBlock x:Name="YawText" Text="0" Foreground="#70A800"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Map Container -->
        <Border Grid.Row="1" Background="#0F0F10" ClipToBounds="True">
            <Grid x:Name="MapViewerGrid"
                  Background="Transparent"
                  MouseLeftButtonDown="MapViewer_MouseLeftButtonDown"
                  MouseLeftButtonUp="MapViewer_MouseLeftButtonUp"
                  MouseMove="MapViewer_MouseMove"
                  MouseWheel="MapViewer_MouseWheel">

                <!-- Zoom Control Panel -->
                <Border HorizontalAlignment="Right" VerticalAlignment="Top"
                        Margin="0,8,24,0" Panel.ZIndex="100"
                        Background="#1A1A1A" CornerRadius="4" Padding="8,4">
                    <StackPanel Orientation="Horizontal">
                        <Button Content="-" Width="28" Height="28" Padding="0"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnZoomOut_Click" Margin="0,0,4,0"/>
                        <TextBlock x:Name="ZoomText" Text="100%" Width="50"
                                   Foreground="#9A8866" VerticalAlignment="Center"
                                   TextAlignment="Center"/>
                        <Button Content="+" Width="28" Height="28" Padding="0"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnZoomIn_Click" Margin="4,0,4,0"/>
                        <Button Content="Reset" Padding="8,4"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnResetView_Click" Margin="4,0,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Map Canvas -->
                <Canvas x:Name="MapCanvas" Background="#000"
                        HorizontalAlignment="Left" VerticalAlignment="Top"
                        Cursor="Arrow">
                    <Canvas.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="MapScale" ScaleX="1" ScaleY="1"/>
                            <TranslateTransform x:Name="MapTranslate" X="0" Y="0"/>
                        </TransformGroup>
                    </Canvas.RenderTransform>

                    <!-- Map Image (for bitmap fallback) -->
                    <Image x:Name="MapImage" Stretch="None"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           Visibility="Collapsed"/>

                    <!-- Map SVG (vector graphics) -->
                    <svgc:SvgViewbox x:Name="MapSvg" Stretch="None"/>

                    <!-- Player Marker Arrow -->
                    <Canvas x:Name="PlayerMarker" Visibility="Collapsed">
                        <Canvas.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform x:Name="MarkerScale" ScaleX="1" ScaleY="1"/>
                                <TranslateTransform x:Name="MarkerTranslation" X="0" Y="0"/>
                            </TransformGroup>
                        </Canvas.RenderTransform>

                        <!-- Outer glow -->
                        <Ellipse Width="28" Height="28" Canvas.Left="-14" Canvas.Top="-14"
                                 Fill="#408A2BE2"/>

                        <!-- Center circle -->
                        <Ellipse Width="16" Height="16" Canvas.Left="-8" Canvas.Top="-8"
                                 Fill="#FF8A2BE2" Stroke="#FF70A800" StrokeThickness="2"/>

                        <!-- Direction arrow -->
                        <Path x:Name="DirectionArrow" Fill="#FF8A2BE2" Stroke="#FF70A800" StrokeThickness="1">
                            <Path.Data>
                                <PathGeometry>
                                    <PathFigure StartPoint="0,-24" IsClosed="True">
                                        <LineSegment Point="6,-12"/>
                                        <LineSegment Point="2,-12"/>
                                        <LineSegment Point="2,-8"/>
                                        <LineSegment Point="-2,-8"/>
                                        <LineSegment Point="-2,-12"/>
                                        <LineSegment Point="-6,-12"/>
                                    </PathFigure>
                                </PathGeometry>
                            </Path.Data>
                            <Path.RenderTransform>
                                <RotateTransform x:Name="MarkerRotation" Angle="0" CenterX="0" CenterY="0"/>
                            </Path.RenderTransform>
                        </Path>
                    </Canvas>
                </Canvas>
            </Grid>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#1A1A1A" Padding="10,5">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Map Position:" Foreground="#666" Margin="0,0,5,0"/>
                <TextBlock x:Name="MapPositionText" Text="X: 0, Y: 0" Foreground="#9A8866" Margin="0,0,20,0"/>
                <TextBlock Text="Zoom:" Foreground="#666" Margin="0,0,5,0"/>
                <TextBlock x:Name="ZoomStatusText" Text="100%" Foreground="#9A8866" Margin="0,0,20,0"/>
                <TextBlock Text="Map Coords:" Foreground="#666" Margin="0,0,5,0"/>
                <TextBlock x:Name="MapCoordsText" Text="-" Foreground="#70A800"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
