<Window x:Class="TarkovDBEditor.Views.MapEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        Title="Map Editor" Height="900" Width="1400"
        Background="#0F0F0F"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Control Panel -->
        <Border Grid.Row="0" Background="#1A1A1A" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Map Selector -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Map:" Foreground="#9A8866" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox x:Name="MapSelector" Width="200" Height="28"
                              SelectionChanged="MapSelector_SelectionChanged"
                              DisplayMemberPath="DisplayName"/>
                </StackPanel>

                <!-- Objective Info -->
                <Border Grid.Column="1" Background="#252525" CornerRadius="4" Padding="10,5" Margin="20,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Objective:" Foreground="#666" Margin="0,0,8,0"/>
                            <TextBlock x:Name="ObjectiveDescriptionText" Text="-" Foreground="#9A8866"
                                       TextTrimming="CharacterEllipsis" MaxWidth="600"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="Current Points:" Foreground="#666" Margin="0,0,8,0"/>
                            <TextBlock x:Name="PointsCountText" Text="0" Foreground="#70A800"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Action Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="Clear Points" Click="ClearPoints_Click"
                            Background="#C62828" Foreground="White" BorderThickness="0"
                            Padding="15,5" Margin="0,0,10,0"/>
                    <Button x:Name="SaveButton" Content="Save &amp; Close" Click="SaveAndClose_Click"
                            Background="#70A800" Foreground="White" BorderThickness="0"
                            Padding="15,5"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Map Container -->
        <Border Grid.Row="1" Background="#0F0F10" ClipToBounds="True">
            <Grid x:Name="MapViewerGrid"
                  Background="Transparent"
                  MouseLeftButtonDown="MapViewer_MouseLeftButtonDown"
                  MouseLeftButtonUp="MapViewer_MouseLeftButtonUp"
                  MouseRightButtonDown="MapViewer_MouseRightButtonDown"
                  MouseMove="MapViewer_MouseMove"
                  MouseWheel="MapViewer_MouseWheel">

                <!-- Zoom Control Panel -->
                <Border HorizontalAlignment="Right" VerticalAlignment="Top"
                        Margin="0,8,24,0" Panel.ZIndex="100"
                        Background="#1A1A1A" CornerRadius="4" Padding="8,4">
                    <StackPanel Orientation="Horizontal">
                        <Button Content="-" Width="28" Height="28" Padding="0"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnZoomOut_Click" Margin="0,0,4,0"/>
                        <TextBlock x:Name="ZoomText" Text="100%" Width="50"
                                   Foreground="#9A8866" VerticalAlignment="Center"
                                   TextAlignment="Center"/>
                        <Button Content="+" Width="28" Height="28" Padding="0"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnZoomIn_Click" Margin="4,0,4,0"/>
                        <Button Content="Reset" Padding="8,4"
                                Background="#333" Foreground="#9A8866" BorderThickness="0"
                                Click="BtnResetView_Click" Margin="4,0,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Instructions Panel -->
                <Border HorizontalAlignment="Left" VerticalAlignment="Top"
                        Margin="8,8,0,0" Panel.ZIndex="100"
                        Background="#1A1A1A" CornerRadius="4" Padding="10,6">
                    <StackPanel>
                        <TextBlock Text="Controls:" Foreground="#9A8866" FontWeight="Bold" Margin="0,0,0,4"/>
                        <TextBlock Text="• Left-click: Add point" Foreground="#888" FontSize="11"/>
                        <TextBlock Text="• Right-click: Remove last point" Foreground="#888" FontSize="11"/>
                        <TextBlock Text="• Drag: Pan map" Foreground="#888" FontSize="11"/>
                        <TextBlock Text="• Scroll: Zoom" Foreground="#888" FontSize="11"/>
                    </StackPanel>
                </Border>

                <!-- Map Canvas -->
                <Canvas x:Name="MapCanvas" Background="#000"
                        HorizontalAlignment="Left" VerticalAlignment="Top">
                    <Canvas.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="MapScale" ScaleX="1" ScaleY="1"/>
                            <TranslateTransform x:Name="MapTranslate" X="0" Y="0"/>
                        </TransformGroup>
                    </Canvas.RenderTransform>

                    <!-- Map SVG -->
                    <svgc:SvgViewbox x:Name="MapSvg" Stretch="None"/>

                    <!-- Location Points Canvas -->
                    <Canvas x:Name="PointsCanvas"/>
                </Canvas>
            </Grid>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#1A1A1A" Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Game Coords:" Foreground="#666" Margin="0,0,5,0"/>
                    <TextBlock x:Name="GameCoordsText" Text="X: -, Z: -" Foreground="#9A8866" Margin="0,0,20,0"/>
                    <TextBlock Text="Screen Coords:" Foreground="#666" Margin="0,0,5,0"/>
                    <TextBlock x:Name="ScreenCoordsText" Text="X: -, Y: -" Foreground="#70A800"/>
                </StackPanel>

                <TextBlock Grid.Column="1" x:Name="StatusText" Text="Ready" Foreground="#666"/>
            </Grid>
        </Border>
    </Grid>
</Window>
