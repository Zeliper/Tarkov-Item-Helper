# Item Inventory Management PRD (ì•„ì´í…œ ë³´ìœ  ìˆ˜ëŸ‰ ê´€ë¦¬)

## Status: IMPLEMENTED

## Overview
Items íƒ­ì—ì„œ ë³´ìœ  ìˆ˜ëŸ‰ì„ FIR(Found in Raid)ê³¼ ì¼ë°˜ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•  ìˆ˜ ìˆë„ë¡ í•˜ê³ , í•„ìš” ìˆ˜ëŸ‰ì´ ì¶©ì¡±ë˜ë©´ ì‹œê°ì ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ ê°œì„ . ë˜í•œ ìˆ˜ëŸ‰ ì…ë ¥ UIë¥¼ ê°œì„ í•˜ì—¬ ë¹ ë¥´ê²Œ ìˆ˜ëŸ‰ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

## Reference
- ì‹ ê·œ ì„œë¹„ìŠ¤: `ItemInventoryService.cs` - ì•„ì´í…œ ë³´ìœ  ìˆ˜ëŸ‰ ê´€ë¦¬
- ì‹ ê·œ ëª¨ë¸: `ItemInventory.cs` - FIR/Non-FIR ìˆ˜ëŸ‰ ëª¨ë¸
- ê´€ë ¨ ëª¨ë¸: `TarkovItem.cs`, `ItemRequirement` (í•„ìš” ìˆ˜ëŸ‰ ì •ë³´)
- UI: `ItemsPage.xaml`, `ItemsPage.xaml.cs`

---

## Features

### 1. FIR / Non-FIR Quantity Separation (FIR/ì¼ë°˜ ìˆ˜ëŸ‰ ë¶„ë¦¬)

#### 1.1 Dual Quantity Input
ê° ì•„ì´í…œì— ëŒ€í•´ ë‘ ê°€ì§€ ìˆ˜ëŸ‰ì„ ë³„ë„ë¡œ ì…ë ¥:

| êµ¬ë¶„ | ì„¤ëª… | ì•„ì´ì½˜/í‘œì‹œ |
|------|------|-------------|
| FIR (Found in Raid) | ë ˆì´ë“œì—ì„œ íšë“í•œ ì•„ì´í…œ | âœ“ ì²´í¬ë§ˆí¬ ë˜ëŠ” FIR ë±ƒì§€ |
| Non-FIR (ì¼ë°˜) | í”Œë¦¬ë§ˆì¼“ êµ¬ë§¤ ë“± ì¼ë°˜ ì•„ì´í…œ | ì—†ìŒ ë˜ëŠ” íšŒìƒ‰ í‘œì‹œ |

#### 1.2 Data Model
```csharp
public class ItemInventory
{
    public string ItemId { get; set; }
    public int FirQuantity { get; set; }      // FIR ìˆ˜ëŸ‰
    public int NonFirQuantity { get; set; }   // ì¼ë°˜ ìˆ˜ëŸ‰

    public int TotalQuantity => FirQuantity + NonFirQuantity;
}
```

#### 1.3 Requirement Matching
í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ë§¤ì¹­:

```
ìš”êµ¬ì‚¬í•­: Flash Drive x3 (FIR)
- FIR ìˆ˜ëŸ‰ë§Œ ì²´í¬ â†’ FirQuantity >= 3 ì´ë©´ ì¶©ì¡±

ìš”êµ¬ì‚¬í•­: Bolts x10 (Non-FIR OK)
- ì „ì²´ ìˆ˜ëŸ‰ ì²´í¬ â†’ TotalQuantity >= 10 ì´ë©´ ì¶©ì¡±
```

### 2. Fulfilled Status Display (ì¶©ì¡± ìƒíƒœ í‘œì‹œ)

#### 2.1 Visual Indicators
ìˆ˜ëŸ‰ì´ ì¶©ì¡±ëœ ì•„ì´í…œì˜ ì‹œê°ì  êµ¬ë¶„:

| ìƒíƒœ | í‘œì‹œ ë°©ì‹ |
|------|-----------|
| ë¯¸ì¶©ì¡± | ê¸°ë³¸ ìŠ¤íƒ€ì¼ |
| ì¼ë¶€ ì¶©ì¡± | ì§„í–‰ë¥  í‘œì‹œ (ì˜ˆ: 2/5) |
| ì™„ì „ ì¶©ì¡± | ì·¨ì†Œì„  + íë¦° ìƒ‰ìƒ + ì™„ë£Œ ì•„ì´ì½˜ |

#### 2.2 List Behavior
- ì¶©ì¡±ëœ ì•„ì´í…œì€ ë¦¬ìŠ¤íŠ¸ì—ì„œ **ìˆ¨ê¸°ì§€ ì•ŠìŒ**
- ëŒ€ì‹  ì‹œê°ì ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì‰½ê²Œ ì‹ë³„ ê°€ëŠ¥
- ì˜µì…˜: ì¶©ì¡± ì•„ì´í…œì„ ë¦¬ìŠ¤íŠ¸ í•˜ë‹¨ìœ¼ë¡œ ì •ë ¬ (ì„ íƒì‚¬í•­)

#### 2.3 Strikethrough Style
```
ë¯¸ì¶©ì¡±:
  ğŸ”§ Bolts                    0 / 10

ì¼ë¶€ ì¶©ì¡±:
  ğŸ”§ Bolts                    5 / 10  [=====     ]

ì™„ì „ ì¶©ì¡±:
  âœ“ ğŸ”§ BÌ¶oÌ¶lÌ¶tÌ¶sÌ¶                 10 / 10  (íë¦° ìƒ‰ìƒ)
```

### 3. Quick Quantity Input UI (ë¹ ë¥¸ ìˆ˜ëŸ‰ ì…ë ¥ UI)

#### 3.1 Button Layout
ê° ì•„ì´í…œ ìˆ˜ëŸ‰ ì˜†ì— ë¹ ë¥¸ ì…ë ¥ ë²„íŠ¼ ì œê³µ:

```
+--------------------------------------------------+
|  [ì•„ì´í…œ ì•„ì´ì½˜]  ì•„ì´í…œ ì´ë¦„                       |
|                                                    |
|  FIR:    [-5] [-1]  [ 3 ]  [+1] [+5]              |
|  ì¼ë°˜:   [-5] [-1]  [ 2 ]  [+1] [+5]              |
|                                                    |
|  ì´ ë³´ìœ : 5 / í•„ìš”: 5 (FIR)     [ì¶©ì¡±ë¨ âœ“]        |
+--------------------------------------------------+
```

#### 3.2 Button Actions
| ë²„íŠ¼ | ë™ì‘ |
|------|------|
| -5 | ìˆ˜ëŸ‰ 5 ê°ì†Œ (ìµœì†Œ 0) |
| -1 | ìˆ˜ëŸ‰ 1 ê°ì†Œ (ìµœì†Œ 0) |
| +1 | ìˆ˜ëŸ‰ 1 ì¦ê°€ |
| +5 | ìˆ˜ëŸ‰ 5 ì¦ê°€ |

#### 3.3 Input Behavior
- ë²„íŠ¼ í´ë¦­ ì‹œ ì¦‰ì‹œ ë°˜ì˜
- ìˆ˜ëŸ‰ì€ 0 ë¯¸ë§Œìœ¼ë¡œ ë‚´ë ¤ê°€ì§€ ì•ŠìŒ
- ìˆ«ì ì§ì ‘ ì…ë ¥ë„ ê°€ëŠ¥ (ìˆ«ì ì˜ì—­ í´ë¦­ ì‹œ)
- ë³€ê²½ ì‹œ ìë™ ì €ì¥

### 4. Compact List View (ì»´íŒ©íŠ¸ ë¦¬ìŠ¤íŠ¸ ë·°)

#### 4.1 List Item Layout
ë¦¬ìŠ¤íŠ¸ì—ì„œ ê°„ê²°í•˜ê²Œ í‘œì‹œ:

```
+----------------------------------------------------------+
| [ì•„ì´ì½˜] ì•„ì´í…œëª…          FIR: 3  ì¼ë°˜: 2  | 5/5 âœ“      |
|                            [-1][+1]  [-1][+1]             |
+----------------------------------------------------------+
| [ì•„ì´ì½˜] ì•„ì´í…œëª…          FIR: 0  ì¼ë°˜: 0  | 0/10       |
|                            [-1][+1]  [-1][+1]             |
+----------------------------------------------------------+
```

#### 4.2 Expandable Detail
- ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í´ë¦­ ì‹œ í™•ì¥í•˜ì—¬ ìƒì„¸ ì…ë ¥ UI í‘œì‹œ
- í™•ì¥ ì‹œ -5/+5 ë²„íŠ¼ ì¶”ê°€ í‘œì‹œ
- í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ë³„ í•„ìš” ìˆ˜ëŸ‰ ìƒì„¸ í‘œì‹œ

### 5. Summary Display (ìš”ì•½ í‘œì‹œ)

#### 5.1 Progress Overview
ìƒë‹¨ì— ì „ì²´ ì§„í–‰ ìƒí™© ìš”ì•½:

```
+----------------------------------------------------------+
| ì•„ì´í…œ ìˆ˜ì§‘ í˜„í™©: 45/120 (37.5%)                          |
| FIR ì•„ì´í…œ: 23/60  |  ì¼ë°˜ ì•„ì´í…œ: 22/60                  |
+----------------------------------------------------------+
```

#### 5.2 Filter Options
- [x] ì¶©ì¡± ì•„ì´í…œ í‘œì‹œ
- [ ] FIRë§Œ í•„ìš”í•œ ì•„ì´í…œ í‘œì‹œ
- [ ] ë¯¸ì¶©ì¡± ì•„ì´í…œ ìš°ì„  ì •ë ¬

---

## UI Layout

### Item List View
```
+------------------------------------------------------------------+
| [Search Bar]  [Filterâ–¼]  [Sortâ–¼]                                  |
+------------------------------------------------------------------+
| ì•„ì´í…œ ìˆ˜ì§‘: 45/120 (37.5%)  |  FIR: 23/60  |  ì¼ë°˜: 22/60       |
+------------------------------------------------------------------+
|                                                                    |
|  +------------------------------------------------------------+  |
|  | [ğŸ”§] Bolts               FIR: 3  ì¼ë°˜: 2  |  5/5  âœ“        |  |
|  |                          [-1][+1] [-1][+1]                  |  |
|  +------------------------------------------------------------+  |
|  | [ğŸ“¦] Flash Drive (FIR)   FIR: 1  ì¼ë°˜: 2  |  1/3  âš         |  |
|  |                          [-1][+1] [-1][+1]   (FIR ë¶€ì¡±)     |  |
|  +------------------------------------------------------------+  |
|  | [ğŸ”©] Screws              FIR: 0  ì¼ë°˜: 0  |  0/15          |  |
|  |                          [-1][+1] [-1][+1]                  |  |
|  +------------------------------------------------------------+  |
|  | [âœ“] SÌ¶cÌ¶rÌ¶eÌ¶wÌ¶ Ì¶NÌ¶uÌ¶tÌ¶sÌ¶          FIR: 5  ì¼ë°˜: 5  |  10/10 âœ“      |  |
|  |                          [-1][+1] [-1][+1]   (ì¶©ì¡±)         |  |
|  +------------------------------------------------------------+  |
|                                                                    |
+------------------------------------------------------------------+
```

### Expanded Item Detail
```
+------------------------------------------------------------------+
| [ğŸ”§] Bolts                                                        |
+------------------------------------------------------------------+
|                                                                    |
|  FIR ìˆ˜ëŸ‰:    [-5] [-1]  [  3  ]  [+1] [+5]                       |
|  ì¼ë°˜ ìˆ˜ëŸ‰:   [-5] [-1]  [  2  ]  [+1] [+5]                       |
|                                                                    |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    |
|  í•„ìš”ì²˜:                                                          |
|  â”œâ”€ í€˜ìŠ¤íŠ¸: "Debut" - 2ê°œ í•„ìš” (FIR ë¶ˆí•„ìš”) âœ“                     |
|  â”œâ”€ í€˜ìŠ¤íŠ¸: "Gunsmith Part 1" - 3ê°œ í•„ìš” (FIR ë¶ˆí•„ìš”) âœ“           |
|  â””â”€ ì€ì‹ ì²˜: Workbench Lv.1 - 5ê°œ í•„ìš” âœ“                           |
|                                                                    |
|  ì´ ë³´ìœ : 5  |  ì´ í•„ìš”: 5  |  ìƒíƒœ: ì¶©ì¡±ë¨ âœ“                     |
|                                                                    |
+------------------------------------------------------------------+
```

---

## Technical Considerations

### Data Storage
```json
{
  "itemInventory": {
    "5d1b376e86f774252519444e": {  // Bolts
      "firQuantity": 3,
      "nonFirQuantity": 2
    },
    "590c2d8786f774245b1f03f3": {  // Flash Drive
      "firQuantity": 1,
      "nonFirQuantity": 2
    }
  }
}
```

### State Management
- `ItemInventoryService` - ì•„ì´í…œ ë³´ìœ  ìˆ˜ëŸ‰ ê´€ë¦¬
- ë³€ê²½ ì‹œ ìë™ ì €ì¥ (debounce ì ìš©)
- ì¶©ì¡± ìƒíƒœ ì‹¤ì‹œê°„ ê³„ì‚°

### Performance
- ëŒ€ëŸ‰ì˜ ì•„ì´í…œ ë Œë”ë§ ìµœì í™” (ê°€ìƒí™” ëª©ë¡)
- ì¶©ì¡± ìƒíƒœ ê³„ì‚° ìºì‹±
- ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ ê´€ë ¨ í•­ëª©ë§Œ ì—…ë°ì´íŠ¸

---

## Implementation Priority

### Phase 1: Data Model & Storage âœ… COMPLETED
1. âœ… `ItemInventory` ëª¨ë¸ ìƒì„±/ìˆ˜ì • (FIR/Non-FIR ë¶„ë¦¬) - `Models/ItemInventory.cs`
2. âœ… ì €ì¥/ë¡œë“œ ë¡œì§ êµ¬í˜„ - `Services/ItemInventoryService.cs`
3. âœ… ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (ë‹¨ì¼ ìˆ˜ëŸ‰ â†’ ë¶„ë¦¬ ìˆ˜ëŸ‰) - ì‹ ê·œ êµ¬í˜„ì´ë¯€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¶ˆí•„ìš”

### Phase 2: Basic UI âœ… COMPLETED
1. âœ… ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸ì— FIR/ì¼ë°˜ ìˆ˜ëŸ‰ í‘œì‹œ
2. âœ… ê¸°ë³¸ +1/-1 ë²„íŠ¼ ì¶”ê°€ (ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì— ì¸ë¼ì¸ ë²„íŠ¼)
3. âœ… ìˆ˜ëŸ‰ ì§ì ‘ ì…ë ¥ ê¸°ëŠ¥ (ìƒì„¸ íŒ¨ë„ì—ì„œ -5/-1/+1/+5 ë²„íŠ¼)

### Phase 3: Fulfillment Display âœ… COMPLETED
1. âœ… ì¶©ì¡± ìƒíƒœ ê³„ì‚° ë¡œì§ - `AggregatedItemViewModel.FulfillmentStatus`
2. âœ… ì·¨ì†Œì„  ë° íë¦° ìƒ‰ìƒ ìŠ¤íƒ€ì¼ ì ìš© - `ItemOpacity`, `NameTextDecorations`
3. âœ… ì§„í–‰ë¥  í‘œì‹œ (ì¼ë¶€ ì¶©ì¡±) - `DetailProgressBar`, `ProgressPercent`

### Phase 4: Enhanced UI âœ… COMPLETED
1. âœ… -5/+5 ë²„íŠ¼ ì¶”ê°€ (ìƒì„¸ íŒ¨ë„)
2. âœ… í™•ì¥ ê°€ëŠ¥í•œ ìƒì„¸ ë·° (Your Inventory ì„¹ì…˜)
3. âœ… ìš”ì•½ í‘œì‹œ (ì „ì²´ ì§„í–‰ ìƒí™©) - í†µê³„ ë°”

### Phase 5: Polish âœ… COMPLETED
1. âœ… í•„í„° ë° ì •ë ¬ ì˜µì…˜ - ì¶©ì¡± ìƒíƒœ í•„í„°, Hide Fulfilled, Progress ì •ë ¬
2. â³ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ (ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ) - í–¥í›„ ì¶”ê°€ ê°€ëŠ¥
3. â³ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› - í–¥í›„ ì¶”ê°€ ê°€ëŠ¥

---

## Dependencies

### Existing (ì‚¬ìš©ë¨)
- `TarkovDataService` - ì•„ì´í…œ ë°ì´í„° ì¡°íšŒ
- `QuestProgressService` - í€˜ìŠ¤íŠ¸ë³„ í•„ìš” ì•„ì´í…œ ì •ë³´
- `HideoutProgressService` - ì€ì‹ ì²˜ë³„ í•„ìš” ì•„ì´í…œ ì •ë³´
- `ImageCacheService` - ì•„ì´ì½˜ ìºì‹±
- `LocalizationService` - ë‹¤êµ­ì–´ ì§€ì›

### New (êµ¬í˜„ë¨)
- âœ… `ItemInventoryService` - ë³´ìœ  ìˆ˜ëŸ‰ ê´€ë¦¬ (ì‹ ê·œ)
- âœ… `ItemInventory` ëª¨ë¸ - FIR/Non-FIR ìˆ˜ëŸ‰ ë°ì´í„°
- âœ… `ItemFulfillmentInfo`, `ItemFulfillmentStatus` - ì¶©ì¡± ìƒíƒœ ê³„ì‚°

---

## Notes

### FIR Requirement Source
- í€˜ìŠ¤íŠ¸/ì€ì‹ ì²˜ ìš”êµ¬ì‚¬í•­ì—ì„œ FIR í•„ìˆ˜ ì—¬ë¶€ í™•ì¸
- API ë°ì´í„°ì˜ `foundInRaid` í•„ë“œ í™œìš©

### Edge Cases
- FIR í•„ìš” ì—†ëŠ” ìš”êµ¬ì‚¬í•­: ì „ì²´ ìˆ˜ëŸ‰(FIR + ì¼ë°˜)ìœ¼ë¡œ ì¶©ì¡± ì²´í¬
- ì—¬ëŸ¬ í€˜ìŠ¤íŠ¸ì—ì„œ ë™ì¼ ì•„ì´í…œ í•„ìš”: ìµœëŒ€ í•„ìš” ìˆ˜ëŸ‰ ê¸°ì¤€
- ì´ë¯¸ ì™„ë£Œëœ í€˜ìŠ¤íŠ¸ì˜ ì•„ì´í…œ: í•„ìš” ìˆ˜ëŸ‰ì—ì„œ ì œì™¸

### User Experience
- ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ ì¦‰ê°ì ì¸ í”¼ë“œë°± (ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜)
- ì¶©ì¡± ì‹œ ì¶•í•˜ íš¨ê³¼ (ì„ íƒì‚¬í•­)
- ì‹¤ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ ìŒìˆ˜ ë°©ì§€ ë° í™•ì¸ ë©”ì‹œì§€ (ëŒ€ëŸ‰ ê°ì†Œ ì‹œ)

---

## Implementation Summary (êµ¬í˜„ ìš”ì•½)

### ì‹ ê·œ íŒŒì¼
1. **`Models/ItemInventory.cs`** - ì¸ë²¤í† ë¦¬ ë°ì´í„° ëª¨ë¸
   - `ItemInventory` - FIR/Non-FIR ìˆ˜ëŸ‰ ì €ì¥
   - `ItemInventoryData` - JSON ì§ë ¬í™”ìš© ì»¨í…Œì´ë„ˆ
   - `ItemFulfillmentStatus` - ì¶©ì¡± ìƒíƒœ enum
   - `ItemFulfillmentInfo` - ì¶©ì¡± ìƒíƒœ ê³„ì‚° í´ë˜ìŠ¤

2. **`Services/ItemInventoryService.cs`** - ì¸ë²¤í† ë¦¬ ê´€ë¦¬ ì„œë¹„ìŠ¤
   - ì‹±ê¸€í†¤ íŒ¨í„´
   - FIR/Non-FIR ìˆ˜ëŸ‰ ì¡°íšŒ/ì„¤ì •
   - ìë™ ì €ì¥ (500ms debounce)
   - `Data/item_inventory.json`ì— ì €ì¥

### ìˆ˜ì •ëœ íŒŒì¼
1. **`Pages/ItemsPage.xaml`**
   - ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì— ì†Œìœ  ìˆ˜ëŸ‰ í‘œì‹œ ë° +1/-1 ë²„íŠ¼ ì¶”ê°€
   - ì¶©ì¡±ëœ ì•„ì´í…œì— ì²´í¬ë§ˆí¬, ì·¨ì†Œì„ , íë¦° ìƒ‰ìƒ ì ìš©
   - ìƒì„¸ íŒ¨ë„ì— "Your Inventory" ì„¹ì…˜ ì¶”ê°€ (-5/-1/+1/+5 ë²„íŠ¼)
   - ì§„í–‰ë¥  í”„ë¡œê·¸ë ˆìŠ¤ ë°” ë° ì¶©ì¡± ìƒíƒœ í‘œì‹œ
   - í•„í„° ì¶”ê°€: Fulfillment Status, Hide Fulfilled
   - ì •ë ¬ ì¶”ê°€: Progress

2. **`Pages/ItemsPage.xaml.cs`**
   - `AggregatedItemViewModel`ì— INotifyPropertyChanged êµ¬í˜„
   - ì†Œìœ  ìˆ˜ëŸ‰ ë° ì¶©ì¡± ìƒíƒœ ì†ì„± ì¶”ê°€
   - `ItemInventoryService` í†µí•©
   - ìˆ˜ëŸ‰ ì¡°ì ˆ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
   - í•„í„° ë¡œì§ í™•ì¥

### ë°ì´í„° ì €ì¥ í˜•ì‹
```json
{
  "lastUpdated": "2024-01-01T00:00:00Z",
  "items": {
    "flash-drive": {
      "itemNormalizedName": "flash-drive",
      "firQuantity": 3,
      "nonFirQuantity": 2
    }
  }
}
```

### ì¶©ì¡± ìƒíƒœ ê³„ì‚° ë¡œì§
- FIR í•„ìš” ì•„ì´í…œ: `OwnedFirQuantity >= TotalFIRCount`
- Non-FIR OK ì•„ì´í…œ: `OwnedTotalQuantity >= TotalCount`
- ìƒíƒœ: NotStarted â†’ PartiallyFulfilled â†’ Fulfilled
